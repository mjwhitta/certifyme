# OpenSSL configuration file.

dir = .

[ ca ]
default_ca = CA_default

[ CA_default ]
certs = $dir/certs
new_certs_dir = $dir/certs
database = $dir/index.db
serial = $dir/index.db.serial
RANDFILE = $dir/private/.rand

certificate = $dir/ca/ca.cert.pem
private_key = $dir/private/ca.key.pem

default_md = sha256

name_opt = CA_default
cert_opt = CA_default
default_days = TODO_CERTDAYS
email_in_dn = no
preserve = no
policy = policy_string

[ policy_string ]
countryName = optional
stateOrProvinceName = optional
organizationName = optional
organizationalUnitName = optional
commonName = supplied
emailAddress = optional

[ policy_any ]
countryName = optional
stateOrProvinceName = optional
localityName = optional
organizationName = optional
organizationalUnitName = optional
commonName = supplied
emailAddress = optional

[ req ]
default_bits = 2048
distinguished_name = req_distinguished_name
string_mask = utf8only

default_md = sha256

x509_extensions = v3_ca

[ req_distinguished_name ]
countryName = Country Name (2 letter code) # TODO_COUNTRY
countryName_default = TODO_COUNTRY
countryName_min = 2 # TODO_COUNTRY
countryName_max = 2 # TODO_COUNTRY

stateOrProvinceName = State or Province Name (full name) # TODO_STATE
stateOrProvinceName_default = TODO_STATE

localityName = Locality Name (eg, city) # TODO_CITY
localityName_default = TODO_CITY

0.organizationName = Organization Name (eg, company) # TODO_COMPANY
0.organizationName_default = TODO_COMPANY

organizationalUnitName = Organizational Unit Name (eg, section) # TODO_UNIT
organizationalUnitName_default = TODO_UNIT

commonName = Common Name (FQDN for server certificates)
commonName_default = TODO_CN
commonName_max = 64

[ req_attributes ]

[ v3_ca ]
subjectKeyIdentifier = hash
authorityKeyIdentifier = keyid:always,issuer
basicConstraints = critical, CA:true
keyUsage = critical, digitalSignature, cRLSign, keyCertSign

[ server_cert ]
basicConstraints = CA:false
nsCertType = server
nsComment = "OpenSSL genereated server certificate"
subjectKeyIdentifier = hash
authorityKeyIdentifier = keyid,issuer
keyUsage = critical, digitalSignature, keyEncipherment
extendedKeyUsage = serverAuth
subjectAltName = @subject_alt_names

[ client_cert ]
basicConstraints = CA:false
nsCertType = client, email
nsComment = "OpenSSL genereated client certificate"
subjectKeyIdentifier = hash
authorityKeyIdentifier = keyid,issuer
keyUsage = critical, digitalSignature, keyEncipherment, nonRepudiation
extendedKeyUsage = clientAuth, emailProtection
subjectAltName = @subject_alt_names

[ subject_alt_names ]
DNS.1 = TODO_CN
